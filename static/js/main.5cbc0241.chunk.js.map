{"version":3,"sources":["../../src/MapPicker.tsx","App.js","index.js"],"names":["MAP_VIEW_ID","Math","apiKey","defaultLocation","onChange","style","className","loaded","React","marker","currentLocation","lat","Google","window","centerLocation","isValidLocation","lng","map","document","center","zoom","position","draggable","clickedLocation","event","handleChangeLocation","src","script","Promise","resolve","loadScript","componentStyle","Object","width","height","id","App","useState","setLat","setLng","type","value","disabled","ReactDOM","render","getElementById"],"mappings":"gNA4BA,IAAMA,EAAc,mBAAqBC,oCAAzC,G,EAE4B,SAAC,G,IAACC,WAAQC,oBAAiBC,aAAUC,UAAMC,cAE7DC,EAASC,YAAf,GACIC,EAASD,WAAb,MAEA,aACI,KAAY,CACR,IAAIE,EAAkBD,UAAtB,cACAL,EAASM,EAAD,MAAwBA,EAAhCN,QAIR,aACI,IAnBiBO,EAAzB,EAmBcC,EAAUC,OAAhB,OACMC,GApBWH,EAoBsBR,EAAD,IApB9C,EAoBoEA,EAArCY,IAnBpBd,iBAAuBA,aAA9B,IAmB2Bc,EAA8E,CAAEJ,IAAF,EAAUK,IAAK,IAC9GC,EAAM,IAAIL,OAAJ,IAAoBM,wBAApB,GACR,CACIC,OADJ,EAEIC,KAAM,IAGNX,EAAJ,QAQIA,0BAPAA,UAAiB,IAAIG,OAAJ,OAAuB,CACpCS,SADoC,EAEpCJ,IAFoC,EAGpCK,WAAW,IAEfV,yBAA8BH,EAA9BG,sBAKJA,oCAA4C,YACxC,IAAIW,EAAkBC,EAAtB,OACAf,yBACAgB,OAIZjB,eAAgB,WACPD,EAAL,UApER,SAAoBmB,EAApB,GACI,IAAMC,EAAST,uBAAf,UAMA,OALAS,2BACAA,uBACAA,QACCT,8CAEM,IAAIU,SAAQ,YACfD,SAAgB,WACZE,QA4DAC,CACI,gEADM,EAAVA,uBAKAvB,gBAPRC,IAYA,IAAMuB,EAAiBC,OAAA,OAAc,CAACC,MAAD,OAAgBC,OAAO,SAAU7B,GAAtE,IAED,OACC,yBAAK8B,GAAInC,EAAaK,MAAO0B,EAAgBzB,UAAWA,KC3D7C8B,EArBH,WAAO,IAAD,EACMC,mBAAS,IADf,mBACT1B,EADS,KACJ2B,EADI,OAEMD,mBAAS,IAFf,mBAETrB,EAFS,KAEJuB,EAFI,KAShB,OACE,oCACF,4CAAwB,2BAAOC,KAAK,OAAOC,MAAO9B,EAAK+B,UAAQ,IAC/D,6CAAyB,2BAAOF,KAAK,OAAOC,MAAOzB,EAAK0B,UAAQ,IAChE,kBAAC,EAAD,CAAWvC,gBAAiB,CAACQ,IAAKA,EAAKK,IAAKA,GAC1CX,MAAO,CAAC6B,OAAO,SACf9B,SAXF,SAA+BO,EAAKK,GAClCsB,EAAO3B,GACP4B,EAAOvB,IAUPd,OAAO,8CCdXyC,IAASC,OAAO,kBAAC,EAAD,MAAS1B,SAAS2B,eAAe,U","file":"static/js/main.5cbc0241.chunk.js","sourcesContent":["import React, { FC } from 'react';\r\n\r\nfunction loadScript(src:string, id:string) {\r\n    const script = document.createElement('script');\r\n    script.setAttribute('async', '');\r\n    script.setAttribute('id', id);\r\n    script.src = src;\r\n    (document.querySelector('head') as any).appendChild(script);\r\n\r\n    return new Promise((resolve) => {\r\n        script.onload = () => {\r\n            resolve();\r\n        };\r\n    });\r\n  }\r\n\r\ntype Props = {\r\n    apiKey:string,\r\n    defaultLocation:{lat:number,lng:number};\r\n    onChange?(lat:number,lng:number):void;\r\n    style?:any;\r\n    className?:string;\r\n}\r\n\r\nfunction isValidLocation(lat:number, lng:number){\r\n    return Math.abs(lat) <= 90 && Math.abs(lng) <= 180;\r\n}\r\n\r\nconst MAP_VIEW_ID = 'google-map-view-' + Math.random().toString(36).substr(2, 9);\r\n\r\nconst MapPicker:FC<Props> = ({apiKey, defaultLocation, onChange, style,className}) => {\r\n    \r\n    const loaded = React.useRef(false);\r\n    let marker = React.useRef<any>(null);\r\n\r\n    function handleChangeLocation(){\r\n        if(onChange){\r\n            var currentLocation = marker.current.getPosition();\r\n            onChange(currentLocation.lat(), currentLocation.lng());\r\n        }\r\n    }\r\n\r\n    function loadMap(){\r\n        const Google = (window as any).google;\r\n        const centerLocation = isValidLocation(defaultLocation.lat, defaultLocation.lng) ? defaultLocation : { lat: 0, lng: 0};\r\n        const map = new Google.maps.Map(document.getElementById(MAP_VIEW_ID), \r\n            { \r\n                center: centerLocation,\r\n                zoom: 5 \r\n            });\r\n\r\n            if(!marker.current){\r\n                marker.current = new Google.maps.Marker({\r\n                    position: centerLocation,\r\n                    map: map,\r\n                    draggable: true\r\n                });\r\n                Google.maps.event.addListener(marker.current, 'dragend', handleChangeLocation);\r\n            } else {\r\n                marker.current.setPosition(centerLocation);\r\n            }\r\n\r\n            Google.maps.event.addListener(map, 'click', function(event:any) {                \r\n                var clickedLocation = event.latLng;\r\n                marker.current.setPosition(clickedLocation);\r\n                handleChangeLocation();\r\n            });\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (!loaded.current) {\r\n            loadScript(\r\n                'https://maps.googleapis.com/maps/api/js?libraries=places&key=' + apiKey,\r\n                'google-maps',\r\n              )\r\n              .then(loadMap);\r\n            loaded.current = true;\r\n        }\r\n\r\n    },[])  // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const componentStyle = Object.assign({width: '100%', height:'600px'}, style || {});\r\n\r\n   return (\r\n    <div id={MAP_VIEW_ID} style={componentStyle} className={className}></div>\r\n   );\r\n};\r\nexport default MapPicker;","import React, { useState } from 'react'\r\n\r\nimport MapPicker from 'react-google-map-picker'\r\n\r\nconst App = () => {\r\n  const [lat, setLat] = useState(22);\r\n  const [lng, setLng] = useState(99);\r\n\r\n  function handleChangeLocation (lat, lng){\r\n    setLat(lat);\r\n    setLng(lng);\r\n  }\r\n\r\n  return (\r\n    <>\r\n  <label>Latitute:</label><input type='text' value={lat} disabled/>\r\n  <label>Longitute:</label><input type='text' value={lng} disabled/>\r\n  <MapPicker defaultLocation={{lat: lat, lng: lng}} \r\n    style={{height:'700px'}}\r\n    onChange={handleChangeLocation} \r\n    apiKey='AIzaSyD07E1VvpsN_0FvsmKAj4nK9GnLq-9jtj8'/>\r\n  </>\r\n  );\r\n}\r\n\r\nexport default App\r\n","import './index.css'\r\n\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}